# 重要事件管理应用优化任务

## 最新更新（2025-11-27）

### 新增功能（第二十四次更新）
28. **转换为跨平台应用（网页应用 + 微信小程序）**
   - [x] 确认 Taro H5 平台配置正确
   - [x] 验证 H5 构建成功
   - [x] 更新 README.md 说明跨平台支持
   - [x] 添加网页应用部署指南
   - [x] 更新 package.json 描述
   - [x] 说明网页应用特有优势
   - [x] 提供本地预览和部署方案
   - [x] 代码检查通过
   - [x] 所有功能已完成

### 新增功能（第二十三次更新）
27. **优化四象限视图标题文字**
   - [x] 将"重要不紧急"改为"重要"
   - [x] 将"紧急不重要"改为"一般"
   - [x] 保持"紧急且重要"和"不紧急不重要"不变
   - [x] 代码检查通过
   - [x] 所有功能已完成

### 新增功能（第二十二次更新）
26. **添加四象限视图展示事件重要性**
   - [x] 在首页添加视图切换按钮（列表视图 / 四象限视图）
   - [x] 实现时间管理四象限矩阵布局
   - [x] 第一象限：紧急且重要（高优先级，红色/橙色渐变）
   - [x] 第二象限：重要不紧急（中优先级，蓝色/靛蓝渐变）
   - [x] 第三象限：紧急不重要（低优先级，黄色/琥珀色渐变）
   - [x] 第四象限：不紧急不重要（待开始状态，灰色渐变）
   - [x] 每个象限显示对应的事件卡片
   - [x] 事件卡片显示标题和截止时间信息
   - [x] 点击事件卡片可跳转到详情页
   - [x] 已完成事件单独显示在底部
   - [x] 添加四象限说明文字
   - [x] 使用清晰的图标和颜色区分不同象限
   - [x] 代码检查通过
   - [x] 所有功能已完成

### 新增功能（第二十一次更新）
25. **统一截止时间显示格式为年/月/日**
   - [x] 修改创建事件页面，截止时间显示格式改为"年/月/日"（例如：2025/12/31）
   - [x] 修改编辑事件页面，截止时间显示格式改为"年/月/日"
   - [x] 修改事件详情页，截止时间显示格式改为"年/月/日"
   - [x] 使用 `replace(/-/g, '/')` 将 "YYYY-MM-DD" 格式转换为 "YYYY/MM/DD"
   - [x] 使用 `toLocaleDateString('zh-CN')` 确保中文环境下的日期格式
   - [x] 代码检查通过
   - [x] 所有功能已完成

### 新增功能（第二十次更新）
24. **每月自动提醒删除上月事件**
   - [x] 在 `src/db/api.ts` 中添加 `getLastMonthEvents()` 函数，获取上月创建的事件
   - [x] 在 `src/db/api.ts` 中添加 `deleteLastMonthEvents()` 函数，删除上月创建的所有事件
   - [x] 在首页添加 `checkMonthlyReminder()` 函数，检查是否需要提醒
   - [x] 使用 `Taro.getStorageSync/setStorageSync` 记录上次提醒时间，避免重复提醒
   - [x] 每月只提醒一次，用户打开应用时自动检查
   - [x] 显示模态对话框询问用户是否删除上月事件
   - [x] 用户选择"删除"后，删除所有上月事件并刷新列表
   - [x] 用户选择"保留"后，不删除事件
   - [x] 如果没有上月事件，则不显示提醒
   - [x] 代码检查通过
   - [x] 所有功能已完成

### 新增功能（第十九次更新）
23. **增加点击已完成卡片快速定位功能**
   - [x] 创建 `getAllEventsForHome()` 函数，获取所有事件（包括已完成的）
   - [x] 修改首页使用新函数，显示所有事件
   - [x] 为"已完成"卡片添加点击事件和视觉反馈效果
   - [x] 修改 `handleScrollToEvent` 函数，支持滚动到已完成事件
   - [x] 为已完成的事件添加视觉区分（灰色背景、删除线、降低透明度）
   - [x] 隐藏已完成事件的"完成"按钮
   - [x] 禁用已完成事件的上移/下移按钮
   - [x] 更新提示文字，包含"已完成"卡片
   - [x] 代码检查通过
   - [x] 所有功能已完成

### 新增功能（第十八次更新）
22. **修复上移/下移功能的视觉反馈问题**
   - [x] 修复点击上移/下移按钮后，事件位置没有立即改变的问题
   - [x] 在交换 sort_order 的同时，交换数组中元素的位置
   - [x] 实现即时视觉反馈，用户点击后立即看到事件位置变化
   - [x] 移除调试功能页面和调试按钮
   - [x] 清理临时测试文件
   - [x] 代码检查通过
   - [x] 所有功能已完成

### 新增功能（第十七次更新）
21. **添加调试功能页面**
   - [x] 创建调试页面 `/pages/debug/index`
   - [x] 显示 useAuth Hook 的认证状态
   - [x] 显示 Supabase Auth 的认证状态
   - [x] 显示数据库连接状态
   - [x] 提供"测试创建事件"功能，帮助诊断创建失败的原因
   - [x] 在首页添加"调试"按钮，方便用户访问调试页面
   - [x] 创建故障排查指南文档 `TROUBLESHOOTING.md`
   - [x] 启用 Supabase OTP 认证（手机号和邮箱）
   - [x] 代码检查通过
   - [x] 所有功能已完成

### 新增功能（第十六次更新）
20. **优化事件定位功能**
   - [x] 修复滚动定位功能，从 `Taro.pageScrollTo` 改为使用 ScrollView 的 `scroll-into-view` 属性
   - [x] 添加 `scrollIntoView` 状态来控制滚动目标
   - [x] 为 ScrollView 添加 `scrollWithAnimation` 属性，实现平滑滚动动画
   - [x] 在统计卡片下方添加提示文字："💡 点击'待办'或'进行中'卡片可快速定位到对应事件"
   - [x] 为可点击的统计卡片添加 `active:scale-95` 和 `transition-all` 类，提供点击反馈效果
   - [x] 优化用户体验，让用户清楚知道统计卡片是可点击的
   - [x] 代码检查通过
   - [x] 所有功能已完成

### 新增功能（第十五次更新）
19. **时间字段可选功能优化**
   - [x] 为创建事件页面的截止时间和开始时间添加"清除"按钮
   - [x] 为编辑事件页面的截止时间和开始时间添加"清除"按钮
   - [x] 在编辑事件页面添加截止时间字段（之前缺失）
   - [x] 更新编辑事件页面的状态管理，包含 deadline 字段
   - [x] 更新编辑事件页面的保存逻辑，支持 deadline 更新
   - [x] 更新编辑事件页面的退出检测逻辑，检测 deadline 变化
   - [x] 代码检查通过
   - [x] 所有功能已完成

### 新增功能（第十四次更新）
18. **提醒功能优化和快速跳转功能**
   - [x] 扩展提醒选项，支持更多提醒方式：
     - 不提醒
     - 开始时铃声提醒
     - 开始时振动提醒
     - 截止时铃声提醒
     - 截止时振动提醒
     - 开始和截止都铃声提醒
     - 开始和截止都振动提醒
   - [x] 更新数据库迁移文件，添加新的提醒选项说明
   - [x] 更新 ReminderType 类型定义
   - [x] 更新创建事件页面的提醒选项
   - [x] 更新编辑事件页面的提醒选项
   - [x] 更新事件详情页面的提醒显示逻辑
   - [x] 实现点击首页"待办"统计卡片滚动到第一个待办事件（不跳转到详情页）
   - [x] 实现点击首页"进行中"统计卡片滚动到第一个进行中事件（不跳转到详情页）
   - [x] 为每个事件卡片添加唯一 id 用于滚动定位
   - [x] 使用 Taro.pageScrollTo 实现平滑滚动效果
   - [x] 代码检查通过
   - [x] 所有功能已完成

### 新增功能（第十三次更新）
17. **事件开始时间和提醒功能**
   - [x] 为 events 表添加 start_time 和 reminder_type 字段
   - [x] 创建数据库迁移文件
   - [x] 应用迁移
   - [x] 更新 Event 类型定义
   - [x] 更新 CreateEventInput 和 UpdateEventInput 类型定义
   - [x] 更新 createEvent 和 createEventWithCustomSteps 函数
   - [x] 在创建事件页面添加开始时间选择器（年/月/日/时/分）
   - [x] 在创建事件页面添加提醒方式选择器（铃声/振动/无）
   - [x] 在编辑事件页面添加开始时间和提醒方式编辑功能
   - [x] 在事件详情页面显示开始时间和提醒方式
   - [x] 在首页事件卡片显示开始时间
   - [ ] 实现提醒功能（到期时触发）
   - [x] 修复 TypeScript 类型错误
   - [x] 代码检查通过

### 新增功能（第十二次更新）
16. **新增本地销售事件分类**
   - 新增"本地销售"事件分类，包含完整的本地销售流程步骤模板
   - 本地销售流程步骤：
     1. 制作delivery note（发一车做一张）
     2. 如果司机发来的是record，保存，每月一结算
     3. 每月初根据上个月的records做delivery note和发票
   - 在创建事件页面的分类选择器中添加"本地销售"选项
   - 在编辑事件页面的分类选择器中添加"本地销售"选项
   - 创建数据库迁移文件并成功应用

### 新增功能（第十一次更新）
14. **事件排序功能**
   - 为 events 表添加 sort_order 字段，用于存储事件排序
   - 事件按优先级高低排列（高 > 中 > 低）
   - 同等优先级的事件按 sort_order 排序
   - 如果 sort_order 相同，则按创建时间排序
   - 在首页为每个事件添加上移/下移按钮
   - 只能在同一优先级内调整排序，不能跨优先级移动
   - 移动后立即更新数据库并刷新显示
   - 禁用状态的按钮显示灰色，可用状态显示蓝色

15. **编辑事件增强功能**
   - 在编辑事件页面可以编辑事件名称
   - 在编辑事件页面可以编辑事件分类
   - 在编辑事件页面可以编辑事件优先级
   - 使用 Picker 组件选择分类和优先级
   - 修改后自动更新事件信息
   - 退出时智能检测所有字段的修改（标题、描述、分类、优先级）

### 新增功能（第十次更新）
11. **步骤状态管理功能**
   - 为 steps 表添加 status 字段，用于存储步骤状态
   - 在事件详情页面为每个步骤添加"编辑状态"按钮
   - 点击按钮后显示状态输入框，可输入自定义状态描述
   - 支持的状态示例：进行中、等待审批、已暂停、需要协助等
   - 状态信息以蓝色背景卡片形式显示在步骤下方
   - 状态信息可随时修改或清空
   - 状态信息独立于步骤的完成状态

12. **步骤编辑按钮优化**
   - 在事件详情页面为每个步骤添加"编辑步骤"按钮
   - 点击按钮后可以直接编辑步骤标题
   - 提供"保存"和"取消"按钮
   - 修改后自动同步到事件描述
   - 按钮顺序：已完成、编辑步骤、编辑状态、删除

13. **新增进口和机械维修分类**
   - 新增"进口"事件分类，包含完整的进口流程步骤模板
   - 进口流程步骤：wanted product list签字 → 报价单签字 → 支付完成 → 已发货 → 报关中 → 收到MRN → 已收货
   - 新增"机械维修"事件分类，包含完整的维修流程步骤模板
   - 维修流程步骤：故障诊断 → 制定方案 → 采购配件 → 执行维修 → 功能测试 → 记录归档
   - 在创建事件页面的分类选择器中添加这两个新分类

### 新增功能（第九次更新）
10. **添加步骤时指定插入位置**
   - 在添加步骤页面增加位置选择器
   - 可以选择将新步骤插入到第1步、第2步...或最后一步
   - 显示当前所有步骤的列表预览
   - 自动调整其他步骤的顺序
   - 插入后同步更新事件描述

### 新增功能（第八次更新）
9. **步骤完成按钮优化**
   - 在事件详情页面的每个步骤下方添加"已完成"按钮
   - 点击按钮后步骤立即标记为已完成
   - 已完成的步骤显示删除线和灰色效果
   - 已完成的步骤不再显示"已完成"按钮
   - 提供两种方式标记步骤完成：点击圆形图标或点击"已完成"按钮

### 新增功能（第七次更新）
8. **界面美化和一键退出功能**
   - 首页采用小清新风格，浅蓝色渐变背景
   - 历史页面采用温暖的黄色渐变背景
   - 统计卡片使用圆角设计和柔和阴影
   - 事件卡片使用更大的圆角和精致的阴影效果
   - 添加更多图标元素，提升视觉效果
   - 按钮采用圆角设计，增加视觉反馈
   - 编辑事件页面添加一键退出按钮
   - 退出时智能检测是否有未保存的修改
   - 提供"保存并退出"和"不保存"两个选项

### 新增功能（第六次更新）
7. **删除事件功能**
   - 在首页的待办事件列表中添加删除按钮
   - 在历史页面的已完成事件列表中添加删除按钮
   - 删除前显示确认对话框，防止误操作
   - 删除事件会同时删除该事件的所有步骤
   - 删除后自动刷新页面数据
   - 适用于所有状态的事件（待办、进行中、已完成）

### 新增功能（第五次更新）
6. **预览中手动添加步骤（增强版）**
   - 在创建事件页面的步骤预览中，可以手动添加新步骤
   - 支持在第一个步骤前添加新步骤
   - 支持在任意步骤前插入新步骤
   - 支持在任意步骤后插入新步骤
   - 手动添加的步骤显示橙色标记，与智能生成步骤区分
   - 可以删除手动添加的步骤
   - 手动添加的步骤和智能生成的步骤一起保存到数据库
   - 创建新的 API 函数 `createEventWithCustomSteps` 支持自定义步骤
   - 适用于所有事件分类（会议准备、项目开发、活动策划、学习计划、发货、通用任务、其他）

### 新增功能（第四次更新）
5. **步骤与描述双向同步**
   - 创建事件时，智能生成的步骤自动同步到描述
   - 添加步骤时，新步骤自动追加到描述末尾
   - 编辑步骤时，描述中对应的步骤同步更新
   - 删除步骤时，描述中对应的步骤同步删除
   - 在编辑描述页面添加"同步到描述"按钮
   - 支持手动在描述中添加或删减步骤
   - 确保步骤和描述始终保持一致

### 新增功能（第三次更新）
4. **描述驱动的步骤重新生成**
   - 在事件详情页添加"编辑描述"按钮
   - 创建专门的编辑描述页面
   - 修改描述时实时显示步骤预览
   - 支持两种操作：
     - 保存描述：只更新描述，保留现有步骤
     - 重新生成步骤：删除现有步骤，根据新描述生成新步骤
   - 重新生成步骤前会提示用户确认
   - 适用场景：事件需求变化、补充描述、优化步骤结构

### 新增功能（第二次更新）
3. **发货类别和智能步骤模板**
   - 在事件分类中新增"发货"选项
   - 为发货类别创建专用的智能步骤生成模板
   - 发货步骤包括：
     1. 客人确认block list
     2. 货代配柜+制作T2L
     3. 发货+制作delivery note
     4. 制作invoice并发给客人+货代+会计师
     5. 货代给我MRN和VGM
     6. 最终的完整单证给到客人
   - 发货步骤支持手动调整、编辑和删除

### 新增功能（第一次更新）
1. **步骤实时预览**
   - 在创建事件页面添加智能步骤预览功能
   - 输入标题和描述后，自动生成并显示步骤预览
   - 使用防抖机制（500ms）优化性能
   - 显示步骤数量统计

2. **步骤完成视觉反馈**
   - 已完成步骤显示删除线效果（line-through）
   - 已完成步骤文字颜色变为灰色（text-muted-foreground）
   - 整体透明度降低（opacity-60）
   - 圆形图标显示绿色对勾

## 完成的任务

### 第一阶段：数据库和基础架构
- [x] 步骤 1: 初始化 Supabase 数据库
  - [x] 创建 events 表
  - [x] 创建 steps 表
  - [x] 创建 step_templates 表
  - [x] 设置 RLS 策略
- [x] 步骤 2: 创建数据库操作层
  - [x] 定义 TypeScript 类型
  - [x] 实现 API 函数
- [x] 步骤 3: 实现智能步骤生成逻辑
  - [x] 创建步骤生成算法
  - [x] 备注解析功能

### 第二阶段：UI 和设计
- [x] 步骤 4: 更新设计系统（配色方案）
  - [x] 更新 app.scss 配色
  - [x] 添加渐变效果
- [x] 步骤 5: 创建页面结构
  - [x] 首页（事件列表）
  - [x] 事件详情页
  - [x] 创建/编辑事件页
  - [x] 历史页面
  - [x] 添加步骤页
  - [x] 更新 app.config.ts

### 第三阶段：功能实现
- [x] 步骤 6: 实现首页功能
  - [x] 事件卡片展示
  - [x] 步骤概览
  - [x] 进度可视化
- [x] 步骤 7: 实现历史页面
  - [x] 已完成事件列表
  - [x] 统计报告
- [x] 步骤 8: 测试和优化
  - [x] 运行 lint 检查
  - [x] 修复错误

### 第四阶段：功能增强
- [x] 步骤 9: 实时预览功能
  - [x] 在创建事件页面添加步骤预览
  - [x] 实现防抖优化
  - [x] 美化预览界面
- [x] 步骤 10: 步骤完成状态优化
  - [x] 添加删除线效果
  - [x] 优化视觉反馈
  - [x] 更新文档

### 第五阶段：发货功能
- [x] 步骤 11: 添加发货类别
  - [x] 在创建事件页面添加"发货"分类选项
  - [x] 创建发货步骤模板数据库 migration
  - [x] 应用 migration 到数据库
  - [x] 更新文档说明

### 第六阶段：描述驱动的步骤重新生成
- [x] 步骤 12: 编辑描述功能
  - [x] 创建编辑描述页面
  - [x] 在事件详情页添加"编辑描述"按钮
  - [x] 实现描述修改时的实时步骤预览
  - [x] 实现"保存描述"功能
  - [x] 实现"重新生成步骤"功能
  - [x] 添加确认提示
  - [x] 注册页面路由
  - [x] 更新文档说明

### 第七阶段：步骤与描述双向同步
- [x] 步骤 13: 双向同步功能
  - [x] 创建步骤与描述同步工具函数
  - [x] 在创建事件时同步步骤到描述
  - [x] 在添加步骤时同步到描述
  - [x] 在编辑步骤时同步到描述
  - [x] 在删除步骤时同步到描述
  - [x] 在编辑描述页面添加"同步到描述"按钮
  - [x] 更新文档说明

### 第八阶段：预览中手动添加步骤（增强版）
- [x] 步骤 14: 预览中手动添加步骤功能
  - [x] 扩展 PreviewStep 类型，添加 is_manual 和 temp_id 字段
  - [x] 创建 createEventWithCustomSteps API 函数
  - [x] 实现在步骤后添加的 UI 和交互逻辑
  - [x] 实现在步骤前添加的 UI 和交互逻辑
  - [x] 实现在第一个步骤前添加的功能
  - [x] 实现删除手动添加步骤的功能
  - [x] 修改提交函数，支持自定义步骤创建
  - [x] 更新文档说明

### 第九阶段：删除事件功能
- [x] 步骤 15: 在首页和历史页面添加删除事件功能
  - [x] 在首页事件卡片添加删除按钮
  - [x] 在历史页面事件卡片添加删除按钮
  - [x] 实现删除事件的处理函数（包含确认对话框）
  - [x] 删除后自动刷新页面数据
  - [x] 更新文档说明

### 第十阶段：界面美化和一键退出功能
- [x] 步骤 16: 美化首页和历史页面（小清新风格）
  - [x] 首页采用浅蓝色渐变背景
  - [x] 历史页面采用温暖的黄色渐变背景
  - [x] 优化统计卡片设计（圆角、阴影、图标）
  - [x] 优化事件卡片设计（更大圆角、精致阴影）
  - [x] 优化按钮设计（圆角、图标、视觉反馈）
  - [x] 添加更多装饰性图标元素
- [x] 步骤 17: 添加一键退出编辑功能
  - [x] 在编辑事件页面添加退出按钮
  - [x] 实现修改检测逻辑
  - [x] 实现退出确认对话框
  - [x] 实现保存并退出功能
  - [x] 实现不保存直接退出功能
  - [x] 更新文档说明

### 第十一阶段：步骤完成按钮优化
- [x] 步骤 18: 在事件详情页面添加"已完成"按钮
  - [x] 在每个未完成步骤的操作按钮区域添加"已完成"按钮
  - [x] 使用绿色样式突出显示
  - [x] 点击后调用现有的 handleToggleStep 函数
  - [x] 已完成的步骤不显示"已完成"按钮
  - [x] 更新文档说明

### 第十二阶段：添加步骤时指定插入位置
- [x] 步骤 19: 在添加步骤页面增加位置选择功能
  - [x] 添加位置选择器（Picker组件）
  - [x] 加载并显示当前所有步骤的列表
  - [x] 生成位置选项（第1步、第2步...最后一步）
  - [x] 实现在指定位置插入新步骤的逻辑
  - [x] 自动调整其他步骤的 order_index
  - [x] 插入后同步更新事件描述
  - [x] 更新文档说明

### 第十三阶段：事件排序和编辑增强
- [x] 步骤 20: 实现事件排序功能
  - [x] 为 events 表添加 sort_order 字段
  - [x] 创建数据库迁移文件
  - [x] 应用迁移并设置默认值
  - [x] 更新 Event 类型定义
  - [x] 修改 getPendingEvents API 实现三级排序
  - [x] 添加 updateEventSortOrder 和 batchUpdateEventSortOrder API
  - [x] 在首页添加上移/下移按钮
  - [x] 实现同优先级内的排序调整逻辑
  - [x] 禁止跨优先级移动
- [x] 步骤 21: 增强编辑事件页面
  - [x] 添加事件名称编辑功能
  - [x] 添加事件分类编辑功能
  - [x] 添加事件优先级编辑功能
  - [x] 使用 Picker 组件选择分类和优先级
  - [x] 更新保存逻辑以支持所有字段
  - [x] 更新退出检测逻辑以检查所有字段
  - [x] 更新重新生成步骤逻辑以使用新字段
  - [x] 更新文档说明

### 第十四阶段：提醒功能优化和快速跳转
- [x] 步骤 22: 优化提醒功能
  - [x] 扩展 ReminderType 类型，支持更多提醒选项
  - [x] 更新数据库迁移文件说明
  - [x] 更新创建事件页面的提醒选项列表
  - [x] 更新编辑事件页面的提醒选项列表
  - [x] 更新事件详情页面的提醒显示逻辑
  - [x] 创建辅助函数获取提醒方式的显示文本和图标
- [x] 步骤 23: 实现快速跳转功能
  - [x] 为首页"待办"统计卡片添加点击事件
  - [x] 为首页"进行中"统计卡片添加点击事件
  - [x] 实现跳转到第一个对应状态事件的逻辑
  - [x] 添加无事件时的提示信息
  - [x] 更新文档说明

## 完成情况
✅ 所有功能已完成实现
✅ 代码检查通过
✅ 文档已更新
✅ 新增实时预览功能
✅ 新增步骤完成视觉反馈
✅ 新增发货类别和智能步骤模板
✅ 新增描述驱动的步骤重新生成功能
✅ 新增步骤与描述双向同步功能
✅ 新增预览中手动添加步骤功能（支持在步骤前后任意位置添加）
✅ 新增删除事件功能（首页和历史页面）
✅ 新增小清新界面风格（首页和历史页面）
✅ 新增一键退出编辑功能
✅ 新增步骤完成按钮（事件详情页面）
✅ 新增添加步骤时指定插入位置功能
✅ 新增事件排序功能（按优先级和手动调整）
✅ 新增编辑事件增强功能（名称、分类、优先级）
✅ 新增本地销售事件分类和智能步骤模板
✅ 新增提醒功能优化（支持开始时间和截止时间的多种提醒方式）
✅ 新增快速定位功能（点击统计卡片滚动到对应事件，不跳转页面）

## 实现的功能

### 智能步骤生成
- ✅ 事件创建时自动生成基础步骤框架
- ✅ 备注智能解析：识别列表格式并生成步骤
- ✅ 多维度步骤生成：支持模板匹配和关键词识别
- ✅ 步骤智能分类：按类别组织步骤
- ✅ **实时预览**：输入时即时显示生成的步骤
- ✅ **发货类别**：专门的发货流程步骤模板，包含完整的货运单证流程
- ✅ **进口类别**：专门的进口流程步骤模板，包含从签字到收货的完整流程
- ✅ **机械维修类别**：专门的维修流程步骤模板，包含从诊断到归档的完整流程
- ✅ **本地销售类别**：专门的本地销售流程步骤模板，包含delivery note制作、record管理和月度结算
- ✅ **描述驱动**：编辑描述后可重新生成步骤，支持保存描述或重新生成步骤
- ✅ **双向同步**：步骤和描述自动保持同步，支持手动添加或删减步骤
- ✅ **预览添加（增强版）**：在创建事件时，可在步骤预览中的任意位置（步骤前、步骤后）手动添加额外步骤

### 首页功能
- ✅ 事件卡片展示，包含优先级、状态、截止时间、开始时间
- ✅ 统计数据展示（全部、待办、进行中、已完成）
- ✅ 快速操作：标记完成、查看详情
- ✅ 智能提醒：显示逾期天数和剩余时间
- ✅ **删除事件**：在事件卡片上直接删除待办事件
- ✅ **事件排序**：按优先级高低自动排列（高 > 中 > 低）
- ✅ **手动调整排序**：在同一优先级内使用上移/下移按钮调整顺序
- ✅ **智能排序限制**：不能跨优先级移动事件
- ✅ **排序视觉反馈**：可用按钮显示蓝色，禁用按钮显示灰色
- ✅ **快速定位**：点击"待办"或"进行中"统计卡片，页面自动滚动到第一个对应状态的事件（不跳转页面）

### 事件详情页
- ✅ 完整的事件信息展示（包括开始时间和提醒方式）
- ✅ 步骤列表展示和管理
- ✅ 进度条可视化
- ✅ 步骤编辑、删除、完成功能
- ✅ **删除线效果**：已完成步骤显示删除线
- ✅ **编辑描述**：支持编辑事件描述并重新生成步骤
- ✅ **已完成按钮**：每个未完成步骤下方显示绿色"已完成"按钮
- ✅ **双重完成方式**：可点击圆形图标或"已完成"按钮标记步骤完成
- ✅ **指定位置添加步骤**：添加步骤时可选择插入到第1步、第2步...或最后一步
- ✅ **编辑步骤按钮**：每个步骤下方显示"编辑步骤"按钮，可直接编辑步骤标题
- ✅ **步骤状态管理**：为每个步骤添加"编辑状态"按钮，可输入自定义状态描述
- ✅ 快速操作按钮（开始执行、标记完成、删除事件）

### 步骤管理
- ✅ **位置选择器**：添加步骤时显示位置选择器
- ✅ **步骤列表预览**：显示当前所有步骤，帮助决定插入位置
- ✅ **智能排序**：插入新步骤后自动调整所有步骤的顺序
- ✅ **描述同步**：步骤顺序变化后自动同步到事件描述
- ✅ **步骤编辑**：每个步骤提供"编辑步骤"按钮，可直接修改步骤标题
- ✅ **状态管理**：每个步骤可添加自定义状态描述（如"进行中"、"等待审批"等）
- ✅ **状态显示**：状态信息以蓝色背景卡片形式显示在步骤下方
- ✅ **状态编辑**：可随时修改或清空步骤状态信息

### 历史页面
- ✅ 按月份分组显示已完成事件
- ✅ 显示完成时间和耗时统计
- ✅ 累计完成数量展示
- ✅ **删除事件**：在历史记录中删除已完成事件
- ✅ **小清新风格**：温暖的黄色渐变背景，精致的卡片设计

### 编辑事件页面
- ✅ **编辑事件名称**：可以修改事件标题
- ✅ **编辑事件分类**：使用 Picker 组件选择分类
- ✅ **编辑事件优先级**：使用 Picker 组件选择优先级（高/中/低）
- ✅ **编辑开始时间**：可以修改事件开始时间
- ✅ **编辑提醒方式**：支持7种提醒选项（不提醒、开始时铃声/振动、截止时铃声/振动、开始和截止都铃声/振动）
- ✅ 编辑事件描述
- ✅ 实时步骤预览
- ✅ 重新生成步骤功能
- ✅ 同步步骤到描述功能
- ✅ **一键退出**：智能检测所有字段的修改并提供保存选项

### 创建事件页面
- ✅ **开始时间选择**：支持选择事件开始时间（年/月/日/时/分）
- ✅ **提醒方式选择**：支持7种提醒选项
  - 不提醒
  - 开始时铃声提醒
  - 开始时振动提醒
  - 截止时铃声提醒
  - 截止时振动提醒
  - 开始和截止都铃声提醒
  - 开始和截止都振动提醒
- ✅ 智能步骤预览
- ✅ 手动添加步骤功能

### 设计优化
- ✅ **小清新界面风格**：柔和的渐变背景和圆润的卡片设计
- ✅ **首页**：浅蓝色渐变背景（#f0f9ff → #e0f2fe → #ffffff）
- ✅ **历史页面**：温暖的黄色渐变背景（#fef3c7 → #fde68a → #ffffff）
- ✅ **圆角设计**：统计卡片和事件卡片使用更大的圆角（12px-20px）
- ✅ **精致阴影**：柔和的阴影效果，增强层次感
- ✅ **丰富图标**：添加更多装饰性图标元素
- ✅ **圆角按钮**：所有按钮采用圆角设计，增加视觉反馈
- ✅ 响应式布局
- ✅ 优雅的交互动画
- ✅ 清晰的视觉反馈