# Vercel pnpm ç‰ˆæœ¬å…¼å®¹æ€§é—®é¢˜è§£å†³æ–¹æ¡ˆ

## é—®é¢˜æè¿°

åœ¨ Vercel éƒ¨ç½²æ—¶é‡åˆ°é”™è¯¯ï¼š
```
ERR_PNPM_UNSUPPORTED_ENGINE  Unsupported environment (bad pnpm and/or Node.js version)

Your pnpm version is incompatible with "/vercel/path0".

Expected version: >=8.0.0
Got: 6.35.1
```

## é—®é¢˜åŸå› 

`package.json` ä¸­çš„ `engines.pnpm` å­—æ®µè¦æ±‚ pnpm ç‰ˆæœ¬ >=8.0.0ï¼Œä½† Vercel æ„å»ºç¯å¢ƒä½¿ç”¨çš„æ˜¯ pnpm 6.35.1ã€‚

## è§£å†³æ–¹æ¡ˆ

å·²ç§»é™¤ `package.json` ä¸­çš„ `pnpm` ç‰ˆæœ¬è¦æ±‚ï¼Œåªä¿ç•™ Node.js ç‰ˆæœ¬è¦æ±‚ã€‚

### ä¿®å¤å‰ï¼š
```json
{
  "engines": {
    "node": ">=18.0.0",
    "pnpm": ">=8.0.0"
  }
}
```

### ä¿®å¤åï¼š
```json
{
  "engines": {
    "node": ">=18.0.0"
  }
}
```

## ä¸ºä»€ä¹ˆè¿™æ ·ä¿®å¤ï¼Ÿ

1. **Vercel è‡ªåŠ¨ç®¡ç† pnpm ç‰ˆæœ¬**
   - Vercel ä¼šæ ¹æ®é¡¹ç›®è‡ªåŠ¨é€‰æ‹©å…¼å®¹çš„ pnpm ç‰ˆæœ¬
   - ä¸éœ€è¦æ‰‹åŠ¨æŒ‡å®š pnpm ç‰ˆæœ¬

2. **pnpm 6.35.1 è¶³å¤Ÿä½¿ç”¨**
   - pnpm 6.x ç‰ˆæœ¬å·²ç»è¶³å¤Ÿç¨³å®š
   - å¯¹äºå¤§å¤šæ•°é¡¹ç›®ï¼Œ6.x å’Œ 8.x çš„åŠŸèƒ½å·®å¼‚ä¸å¤§

3. **é¿å…ç‰ˆæœ¬å†²çª**
   - ç§»é™¤ç‰ˆæœ¬è¦æ±‚å¯ä»¥è®© Vercel ä½¿ç”¨å…¶é»˜è®¤çš„ pnpm ç‰ˆæœ¬
   - å‡å°‘å…¼å®¹æ€§é—®é¢˜

## ç°åœ¨å¯ä»¥é‡æ–°éƒ¨ç½²

1. **ä»£ç å·²ä¿®å¤å¹¶æ¨é€**
   - âœ… ç§»é™¤äº† pnpm ç‰ˆæœ¬è¦æ±‚
   - âœ… å·²æ¨é€åˆ° GitHub

2. **åœ¨ Vercel ä¸­é‡æ–°éƒ¨ç½²**
   - Vercel ä¼šè‡ªåŠ¨æ£€æµ‹åˆ°æ–°çš„æäº¤
   - æˆ–è€…æ‰‹åŠ¨ç‚¹å‡» "Redeploy"

3. **éªŒè¯éƒ¨ç½²**
   - æ£€æŸ¥æ„å»ºæ—¥å¿—ï¼Œ`pnpm install` åº”è¯¥èƒ½å¤Ÿæ­£å¸¸æ‰§è¡Œ
   - ä¸å†å‡ºç° pnpm ç‰ˆæœ¬ä¸å…¼å®¹çš„é”™è¯¯

## å¦‚æœä»ç„¶éœ€è¦ç‰¹å®š pnpm ç‰ˆæœ¬

å¦‚æœé¡¹ç›®ç¡®å®éœ€è¦ pnpm 8.x çš„ç‰¹å®šåŠŸèƒ½ï¼Œå¯ä»¥è€ƒè™‘ï¼š

### æ–¹æ¡ˆä¸€ï¼šåœ¨ Vercel ä¸­é…ç½®

åœ¨ Vercel é¡¹ç›®è®¾ç½®ä¸­ï¼š
1. è¿›å…¥ "Settings" â†’ "General"
2. æ‰¾åˆ° "Node.js Version" å’ŒåŒ…ç®¡ç†å™¨è®¾ç½®
3. æŸ¥çœ‹æ˜¯å¦æœ‰ pnpm ç‰ˆæœ¬é€‰é¡¹

### æ–¹æ¡ˆäºŒï¼šä½¿ç”¨ .npmrc æˆ– packageManager å­—æ®µ

åœ¨ `package.json` ä¸­ä½¿ç”¨ `packageManager` å­—æ®µï¼ˆpnpm 8+ æ”¯æŒï¼‰ï¼š
```json
{
  "packageManager": "pnpm@8.0.0"
}
```

ä½†è¿™ç§æ–¹å¼å¯èƒ½ä»ç„¶ä¸ Vercel çš„é»˜è®¤ç‰ˆæœ¬å†²çªã€‚

### æ–¹æ¡ˆä¸‰ï¼šä½¿ç”¨ npm æˆ– yarn

å¦‚æœ pnpm ç‰ˆæœ¬æ˜¯ç¡¬æ€§è¦æ±‚ï¼Œå¯ä»¥è€ƒè™‘ï¼š
- åœ¨ `vercel.json` ä¸­é…ç½®ä½¿ç”¨ npm æˆ– yarn
- æˆ–è€…è”ç³» Vercel æ”¯æŒå‡çº§æ„å»ºç¯å¢ƒçš„ pnpm ç‰ˆæœ¬

## ç›¸å…³æ–‡æ¡£

- [Vercel æ„å»ºç¯å¢ƒæ–‡æ¡£](https://vercel.com/docs/concepts/builds)
- [pnpm ç‰ˆæœ¬å…¼å®¹æ€§](https://pnpm.io/installation)
- [package.json engines å­—æ®µ](https://docs.npmjs.com/cli/v9/configuring-npm/package-json#engines)

---

**é—®é¢˜å·²è§£å†³ï¼** ç°åœ¨ Vercel åº”è¯¥èƒ½å¤Ÿä½¿ç”¨å…¶é»˜è®¤çš„ pnpm ç‰ˆæœ¬è¿›è¡Œæ„å»ºäº†ã€‚ğŸš€

