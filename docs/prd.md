# 重要事件管理网页应用优化需求文档

## 1. 优化概述
### 1.1 代码优化
对现有网页应用进行全面代码优化，提升运行效率和稳定性，优化数据处理逻辑和界面渲染性能。

### 1.2 功能优化
增强事件管理的智能化水平，提升用户体验。

## 2. 功能优化需求
### 2.1 智能步骤生成功能
- 事件创建时自动生成功步：用户新增重要事件后，系统自动为其生成基础步骤框架
- 备注智能解析：系统识别用户在备注中填写的说明内容，智能分析并生成具体的完成步骤
- 多维度步骤生成：支持按时间顺序、任务依赖关系等多种方式生成步骤序列
- 步骤智能分类：将相关步骤进行分组整理，便于用户按模块推进
- 发货事件专用步骤：针对发货类事件自动生成标准流程步骤
  - 步骤1：客人确认block list\n  - 步骤2：货代配柜+制作T2L
  - 步骤3：发货+制作delivery note
  - 步骤4：制作invoice并发给客人+货代+会计师
  - 步骤5：货代给我MRN和VGM
  - 步骤6：最终的完整单证给到客人
- 进口事件专用步骤：针对进口类事件自动生成标准流程步骤
  - 步骤1：wanted product list签字
  - 步骤2：报价单（或者PI）签字
  - 步骤3：所有支付已完成
  - 步骤4：已发货
  - 步骤5：报关中
  - 步骤6：已收到MRN
  - 步骤7：已收货
- 机械维修事件专用步骤：针对机械维修类事件自动生成标准流程步骤
- 本地销售事件专用步骤：针对本地销售类事件自动生成标准流程步骤
  - 步骤1：制作delivery note(发一车做一张)
  - 步骤2：如果司机发来的是record,保存，每月一结算
  - 步骤3：每月初根据上个月的records做delivery note和发票
- 手动调整支持：所有自动生成的步骤均支持用户手动拖拽调整顺序和层级关系
- 手动添加步骤：在智能生成步骤预览中增加手动添加功能，用户可在任意步骤下插入新步骤，原步骤保持不变

### 2.2 首页功能升级
- 自动步骤展示：在事件卡片中显示自动生成的步骤概览
- 一步编辑：支持直接在列表页编辑自动生成的步骤内容
- 智能提醒：根据步骤完成情况和Deadline自动调整提醒策略

### 2.3 历史页面增强
- 步骤完成记录：在历史页面显示事件的步骤完成轨迹
- 智能总结：自动生成事件处理的完成报告和耗时统计
- 学习优化：基于历史操作数据优化未来的步骤生成功能

### 2.4 一键退出编辑功能
- 快捷退出按钮：在事件编辑页面新增「退出编辑」按钮
- 保存确认弹窗：点击退出按钮时弹出确认对话框，询问「是否保存编辑内容？」
- 双重选择：提供「保存并退出」和「放弃退出」两个选项
- 状态恢复：选择放弃退出时恢复到编辑前的状态

### 2.5 待办事件时间管理
- 手动设置开始时间：对于待办事件，用户可手动选择开始时间（精确到年/月/日/时/分）
- 到期提醒功能：到达设定开始时间时自动触发提醒
- 多种提醒方式：支持选择铃声提醒或电脑声音提醒
- 提醒设置：用户可为每个待办事件单独配置提醒方式
- 时间选择器：提供直观的时间选择界面，支持快速选择常用时间点

### 2.6 上月事件清理功能
- 自动提醒机制：每月1日自动弹出提醒对话框询问「是否删除全部上月事件？」
- 二选一确认：提供「是」和「否」两个选项供用户选择
- 批量删除逻辑：用户选择「是」时，系统自动删除所有上月录入的事件
- 日志记录：记录删除操作日志，包括删除时间和操作人信息
- 安全设计：删除操作不可逆，提醒用户确认后再执行

## 3. 技术实现要求
### 3.1 智能算法集成
- 文本解析模块：提取备注中的关键信息和任务要素
- 步骤生成模型：基于任务类型和复杂度自适应生成合适步骤
- 智能推荐引擎：根据用户习惯优化步骤生成策略
- 事件分类识别：自动识别发货类、进口类、机械维修类、本地销售类事件并应用专属步骤模板

### 3.2 数据结构优化
- 事件-步骤关联关系：建立完善的数据库结构支持多级任务管理
- 智能标签系统：为事件和步骤添加元数据标签便于分类处理
- 操作历史记录：保存用户对自动生成步骤的修改历史
- 步骤排序字段：支持步骤顺序的动态调整和保存
- 手动添加记录：跟踪用户手动插入的步骤及其层级关系
- 事件类型字段：新增进口、机械维修、本地销售事件类型标识
- 编辑状态管理：新增编辑缓存机制，支持退出时的保存选择
- 开始时间字段：为事件添加startTime字段，存储用户手动设置的开始时间
- 提醒设置存储：新增reminderSettings字段记录用户的提醒偏好
- 创建时间索引：为事件添加创建时间索引，便于按月份查询和管理

### 3.3 时间提醒系统
- 定时任务：基于用户设置的开始时间创建定时提醒任务
- 多种提醒方式支持：集成系统声音播放和桌面通知API
- 状态管理：实时监控事件状态，确保只对待办事件进行提醒
- 重复提醒：支持间隔一段时间后重新提醒未处理的事件
- 月度清理定时器：每月1日0点自动触发上月事件清理提醒

## 4. 用户体验改进
### 4.1 交互优化
- 一键确认：用户可快速确认自动生成的步骤内容
- 拖拽编辑：支持拖拽调整步骤顺序和层级关系
- 快速操作：提供批量完成、延期等便捷功能按钮
- 分类筛选：支持按事件类型（发货、进口、机械维修、本地销售、其他类型）筛选查看
- 插入功能：在每个步骤右侧提供「+添加子步骤」按钮，支持手动插入新步骤
- 退出交互：新增顶部右上角「退出编辑」按钮，底部新增「保存并退出」确认按钮
- 类型选择：新增事件分类选择功能，包含发货、进口、机械维修、本地销售等类型
- 时间设置：在事件编辑页面新增「设置开始时间」按钮，支持精确时间选择
- 提醒配置：提供铃声选择器和声音开关，用户可自定义提醒方式
- 清理提醒：每月1日自动弹出「是否删除全部上月事件？」确认对话框

### 4.2 可视化改进
- 进度可视化：以进度条或里程碑形式展示步骤完成情况
- 时间轴展示：按时间维度直观呈现事件的完整历程
- 状态颜色标识：用不同颜色区分待做、进行中、已完成状态
- 类型图标：发货类、进口类、机械维修类、本地销售类事件采用专属图标标识
- 新增标识：手动添加的步骤采用特殊图标或边框标识，便于区分智能生成步骤
- 编辑状态提示：编辑页面顶部显示「正在编辑」状态条
- 类型颜色编码：不同事件类型采用不同主题色进行视觉区分
- 时间显示：待办事件显示预计开始时间，进行中事件显示剩余时间
- 清理提示：每月最后一天开始显示「即将清理上月事件」提示

## 5. 页面美化需求
### 5.1 首页美化（小清新风格）
- 配色方案：主色调采用深蓝色(#1E3A8A)，辅以浅灰色(#F8FAFC)背景，重要提醒使用橙红色(#ED8936)，确保视觉一致性
- 背景色：采用渐变白色(#FFF)到浅灰白(#F8F9FA)
- 卡片设计：圆角增加到12px，添加轻微阴影效果
- 图标风格：采用线性图标配合彩色填充
- 按钮样式：透明按钮配合彩色边框和文字

### 5.2 编辑页美化（小清新风格）
- 背景色：使用#FFFFFF作为主背景色
- 卡片边框：添加细线边框和轻微圆角
- 按钮设计：主要按钮采用#5CB85C绿色，次要按钮使用#F5F5F5浅灰色
- 表单样式：输入框采用圆角设计，聚焦时显示绿色边框
- 标题样式：使用较粗字体重量，颜色为#333333

## 6. 设计风格保持
### 6.1 配色方案
主色调继续采用深蓝色(#1E3A8A)，辅以浅灰色(#F8FAFC)背景，重要提醒使用橙红色(#ED8936)，确保视觉一致性

### 6.2 视觉细节
保持圆角8px和柔和阴影设计，图标风格延续简约线性风格，新增智能功能采用渐变蓝色突出科技感

### 6.3 整体布局
维持卡片式布局基础上，优化信息密度和留白比例，智能生成区域采用折叠面板设计便于展开收起

## 7. 参考界面
使用用户提供的图片image.png作为界面设计参考，保持与现有界面风格的一致性。